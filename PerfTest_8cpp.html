<html>
    <head>
      <meta name="keywords" content="0MQ, ZeroMQ, C++, multipart, message, library, open source, ZmqMessage" />
      <meta name="description" content="ZmqMessage is free open source C++ library for sending and receiving ZeroMQ multipart messages"/>
      <meta name="google-site-verification" content="0EvtpfjffSrc0fDV9ubKQVfq3IV55KY5d59hXHg9M34" />
      <title>ZmqMessage: tests/PerfTest.cpp File Reference</title>
      <link href="doxygen.css" rel="stylesheet" type="text/css">
<style>
/* must override a few items to get the style background color */

</style>
    </head>
    <body>

<table class="zm_headbar">
<tr>
<td>
  <span><a href="index.html">Overview</a></span>
  <span><a href="zm_tutorial.html">Tutorial</a></span>
  <span><a href="namespaceZmqMessage.html">API reference</a></span>
  <span><a href="examples.html">Examples</a></span>
  <span><a href="zm_build.html">Build</a></span>
  <span><a href="https://github.com/zmqmessage/zmqmessage/">Download</a></span>
</td>

<td align="right" class="zm_greynote">ZmqMessage 0.1 - 8 Sep 2011</td>

</tr></table>

<hr style="height: 3px;">
<!-- Generated by Doxygen 1.4.7 -->
<h1>tests/PerfTest.cpp File Reference</h1>Measuring performance of receiving/transmitting multipart ZMQ message using <a class="el" href="namespaceZmqMessage.html">ZmqMessage</a> library compared to plain ZMQ C++ API. <a href="#_details">More...</a>
<p>
<code>#include &quot;pthread.h&quot;</code><br>
<code>#include &lt;cstddef&gt;</code><br>
<code>#include &lt;cassert&gt;</code><br>
<code>#include &lt;cstring&gt;</code><br>
<code>#include &lt;iostream&gt;</code><br>
<code>#include &quot;<a class="el" href="ZmqMessage_8hpp-source.html">ZmqMessage.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="StringFace_8hpp-source.html">../examples/StringFace.hpp</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#0d22ae98167989fabf628d43f94b923f">ZMQMESSAGE_LOG_STREAM</a>&nbsp;&nbsp;&nbsp;ZMQMESSAGE_LOG_STREAM_NONE</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#ba05dd2d83740c94222b093d83b308d5">ARRAY_LEN</a>(arr)&nbsp;&nbsp;&nbsp;sizeof(arr)/sizeof((arr)[0])</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">zmq::context_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#dfc676557ead71d2d6a26f06c84409fe">ctx</a> (1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#b47cf8d72b40f1efd25af4ec20ad70fc">raw_sender</a> (zmq::socket_t &amp;s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#78d8c6b7fccade5e31bc16888285b340">multipart_sender</a> (zmq::socket_t &amp;s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#e4bfbf3cf3b85ea96043619ea95c0ae1">raw_receiver</a> (void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#10bd523252fe166d8fc8173a76a3bfb8">multipart_receiver</a> (void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#4b097df32a52205a4c919b840eba55fc">main</a> (int, char **)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#f31b5a3621834d29d8bc64d6584a63de">endpoint_raw</a> = &quot;inproc://simple-test-raw&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#40ebd5519ed78061a2200b6cadf812e8">endpoint_mes</a> = &quot;inproc://simple-test-mes&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#db9c52a128624b780a769b6dc8241309">PART1</a> [] = &quot;01234567890&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#bcf087b7e7810a45279f116e3c5fe25b">PART2</a> [] = &quot;aaaaaaaaaabbbbbbbbbbccccccccccddddddddddeeeeeeeeee&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#2a2aceb7ba1b9dfa523b27a40092381c">PART3</a> [] = &quot;aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#5b06fc00200013a9ce624c5b5730d407">req_parts</a> [] = {&quot;part1&quot;, &quot;part2&quot;, &quot;part3&quot;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="PerfTest_8cpp.html#296dcdc9115e12a967fd3912c3c331b2">ITERS</a> = 100000</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Measuring performance of receiving/transmitting multipart ZMQ message using <a class="el" href="namespaceZmqMessage.html">ZmqMessage</a> library compared to plain ZMQ C++ API. 
<p>
Copyright (c) 2010-2011 Phorm, Inc.  GNU LGPL v 3.0, see <a href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html">http://www.gnu.org/licenses/lgpl-3.0-standalone.html</a> <dl compact><dt><b>Author:</b></dt><dd>Andrey Skryabin &lt;<a href="mailto:andrew@zmqmessage.org">andrew@zmqmessage.org</a>&gt;, et al.</dd></dl>
<dl compact><dt><b><a class="el" href="test.html#_test000001">Test:</a></b></dt><dd></dd></dl>
<p>
We make 100000 request-response transactions between 2 threads and print results. <hr><h2>Define Documentation</h2>
<a class="anchor" name="ba05dd2d83740c94222b093d83b308d5"></a><!-- doxytag: member="PerfTest.cpp::ARRAY_LEN" ref="ba05dd2d83740c94222b093d83b308d5" args="(arr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARRAY_LEN          </td>
          <td>(</td>
          <td class="paramtype">arr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;sizeof(arr)/sizeof((arr)[0])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0d22ae98167989fabf628d43f94b923f"></a><!-- doxytag: member="PerfTest.cpp::ZMQMESSAGE_LOG_STREAM" ref="0d22ae98167989fabf628d43f94b923f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZMQMESSAGE_LOG_STREAM&nbsp;&nbsp;&nbsp;ZMQMESSAGE_LOG_STREAM_NONE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Variable or macro to stream log messages to (with operator &lt;&lt;). This enables you to adapt <a class="el" href="namespaceZmqMessage.html">ZmqMessage</a> to you logging system. By default, std::cerr is used (when NDEBUG macro is set), otherwise <a class="el" href="namespaceZmqMessage.html">ZmqMessage</a> is silent. If you want to disable logging even for debug builds, use <a class="el" href="Config_8hpp.html#8769c6cb38fa7dba84a6554cbb8641e8">ZMQMESSAGE_LOG_STREAM_NONE</a> <div class="fragment"><pre class="fragment"><span class="preprocessor"> #define ZMQMESSAGE_LOG_STREAM ZMQMESSAGE_LOG_STREAM_NONE</span>
</pre></div> Note, that this constant is overridable either for application builds without shared library or during compiling shared library. Defining this setting in your application headers during building with shared library takes no effect. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="dfc676557ead71d2d6a26f06c84409fe"></a><!-- doxytag: member="PerfTest.cpp::ctx" ref="dfc676557ead71d2d6a26f06c84409fe" args="(1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zmq::context_t ctx           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="4b097df32a52205a4c919b840eba55fc"></a><!-- doxytag: member="PerfTest.cpp::main" ref="4b097df32a52205a4c919b840eba55fc" args="(int, char **)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="10bd523252fe166d8fc8173a76a3bfb8"></a><!-- doxytag: member="PerfTest.cpp::multipart_receiver" ref="10bd523252fe166d8fc8173a76a3bfb8" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* multipart_receiver           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="78d8c6b7fccade5e31bc16888285b340"></a><!-- doxytag: member="PerfTest.cpp::multipart_sender" ref="78d8c6b7fccade5e31bc16888285b340" args="(zmq::socket_t &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void multipart_sender           </td>
          <td>(</td>
          <td class="paramtype">zmq::socket_t &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e4bfbf3cf3b85ea96043619ea95c0ae1"></a><!-- doxytag: member="PerfTest.cpp::raw_receiver" ref="e4bfbf3cf3b85ea96043619ea95c0ae1" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* raw_receiver           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b47cf8d72b40f1efd25af4ec20ad70fc"></a><!-- doxytag: member="PerfTest.cpp::raw_sender" ref="b47cf8d72b40f1efd25af4ec20ad70fc" args="(zmq::socket_t &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void raw_sender           </td>
          <td>(</td>
          <td class="paramtype">zmq::socket_t &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="40ebd5519ed78061a2200b6cadf812e8"></a><!-- doxytag: member="PerfTest.cpp::endpoint_mes" ref="40ebd5519ed78061a2200b6cadf812e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="PerfTest_8cpp.html#40ebd5519ed78061a2200b6cadf812e8">endpoint_mes</a> = &quot;inproc://simple-test-mes&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f31b5a3621834d29d8bc64d6584a63de"></a><!-- doxytag: member="PerfTest.cpp::endpoint_raw" ref="f31b5a3621834d29d8bc64d6584a63de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="PerfTest_8cpp.html#f31b5a3621834d29d8bc64d6584a63de">endpoint_raw</a> = &quot;inproc://simple-test-raw&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="296dcdc9115e12a967fd3912c3c331b2"></a><!-- doxytag: member="PerfTest.cpp::ITERS" ref="296dcdc9115e12a967fd3912c3c331b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t <a class="el" href="PerfTest_8cpp.html#296dcdc9115e12a967fd3912c3c331b2">ITERS</a> = 100000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="db9c52a128624b780a769b6dc8241309"></a><!-- doxytag: member="PerfTest.cpp::PART1" ref="db9c52a128624b780a769b6dc8241309" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="PerfTest_8cpp.html#db9c52a128624b780a769b6dc8241309">PART1</a>[] = &quot;01234567890&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="bcf087b7e7810a45279f116e3c5fe25b"></a><!-- doxytag: member="PerfTest.cpp::PART2" ref="bcf087b7e7810a45279f116e3c5fe25b" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="PerfTest_8cpp.html#bcf087b7e7810a45279f116e3c5fe25b">PART2</a>[] = &quot;aaaaaaaaaabbbbbbbbbbccccccccccddddddddddeeeeeeeeee&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2a2aceb7ba1b9dfa523b27a40092381c"></a><!-- doxytag: member="PerfTest.cpp::PART3" ref="2a2aceb7ba1b9dfa523b27a40092381c" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="PerfTest_8cpp.html#2a2aceb7ba1b9dfa523b27a40092381c">PART3</a>[] = &quot;aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5b06fc00200013a9ce624c5b5730d407"></a><!-- doxytag: member="PerfTest.cpp::req_parts" ref="5b06fc00200013a9ce624c5b5730d407" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#5b06fc00200013a9ce624c5b5730d407">req_parts</a>[] = {&quot;part1&quot;, &quot;part2&quot;, &quot;part3&quot;}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>

<hr style="height: 3px;">

<div class="zm_greynote">
ZmqMessage 0.1 &mdash; open source software, <a href="mailto:support@zmqmessage.org">support@zmqmessage.org</a>
</div>

</body>
</html>
