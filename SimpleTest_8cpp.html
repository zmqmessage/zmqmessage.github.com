<html>
    <head>
      <meta name="keywords" content="0MQ, ZeroMQ, C++, multipart, message, library, open source, ZmqMessage" />
      <meta name="description" content="ZmqMessage is free open source C++ library for sending and receiving ZeroMQ multipart messages"/>
      <meta name="google-site-verification" content="0EvtpfjffSrc0fDV9ubKQVfq3IV55KY5d59hXHg9M34" />
      <title>ZmqMessage: tests/SimpleTest.cpp File Reference</title>
      <link href="doxygen.css" rel="stylesheet" type="text/css">
<style>
/* must override a few items to get the style background color */

</style>
    </head>
    <body>

<table class="zm_headbar">
<tr>
<td>
  <span><a href="index.html">Overview</a></span>
  <span><a href="zm_tutorial.html">Tutorial</a></span>
  <span><a href="namespaceZmqMessage.html">API reference</a></span>
  <span><a href="examples.html">Examples</a></span>
  <span><a href="zm_build.html">Build</a></span>
  <span><a href="https://github.com/zmqmessage/zmqmessage/">Download</a></span>
</td>

<td align="right" class="zm_greynote">ZmqMessage 0.1 - 8 Sep 2011</td>

</tr></table>

<hr style="height: 3px;">
<!-- Generated by Doxygen 1.4.7 -->
<h1>tests/SimpleTest.cpp File Reference</h1>We check correctness of sending, receiving, iterating multipart messages between threads. <a href="#_details">More...</a>
<p>
<code>#include &quot;pthread.h&quot;</code><br>
<code>#include &lt;cstddef&gt;</code><br>
<code>#include &lt;cassert&gt;</code><br>
<code>#include &lt;cstring&gt;</code><br>
<code>#include &lt;string&gt;</code><br>
<code>#include &quot;<a class="el" href="ZmqMessage_8hpp-source.html">ZmqMessage.hpp</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#ba05dd2d83740c94222b093d83b308d5">ARRAY_LEN</a>(arr)&nbsp;&nbsp;&nbsp;sizeof(arr)/sizeof((arr)[0])</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#a2764c6888486b9d77b058544384f0dc">my_free</a> (void *data, void *hint)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename Routing, int socktype&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#a42079b2ae81527e0b10dd7ca471253a">req</a> (void *arg)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename Routing, int socktype&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#1acee2dcd7c3a6241c50a8cfb1dd1f68">res</a> (void *arg)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename ReqRouting, int reqsocktype, typename ResRouting, int ressocktype&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#ec26d0a57824110e517f11c9be53ad48">test</a> (zmq::context_t &amp;ctx_, const char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#754665f9bb084e7d8087aa27aa7552a2">test_time</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#446c6b9a1a4dbab517fbb760870458a3">main</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#7467cad923c237f39ed035428e96b5b9">endpoint</a> = &quot;inproc://simple-test&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#d344ed204d5d5d8db2586036925ed9c5">payload</a> = &quot;0123456789&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#43b0832b49eaccee79b843ba3cdb4fd2">payloadsz</a> = 10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#5b06fc00200013a9ce624c5b5730d407">req_parts</a> [] = {&quot;part1&quot;, &quot;second&quot;, &quot;<a class="el" href="SimpleTest_8cpp.html#d344ed204d5d5d8db2586036925ed9c5">payload</a>&quot;, &quot;bin part&quot;, &quot;num text part&quot;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#cdec4615f0bcb546f9322c74c00b2a02">res_parts</a> [] = {&quot;id&quot;, &quot;status&quot;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#6117886e86ecfcb1bdc5b25b8d165395">STATUS</a> = &quot;OK <a class="el" href="SimpleTest_8cpp.html#6117886e86ecfcb1bdc5b25b8d165395">STATUS</a>&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#ed457b803a8459872ddec8a87eb46524">SECOND_PART</a> = &quot;second part&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#7399e003d8ead5795ca3d5146a494db8">BIN_PART</a> = 567098</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleTest_8cpp.html#719631616821376880b994914fa01e29">NUM_TEXT_PART</a> = 196670</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
We check correctness of sending, receiving, iterating multipart messages between threads. 
<p>
Copyright (c) 2010-2011 Phorm, Inc.  GNU LGPL v 3.0, see <a href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html">http://www.gnu.org/licenses/lgpl-3.0-standalone.html</a> <dl compact><dt><b>Author:</b></dt><dd>Andrey Skryabin &lt;<a href="mailto:andrew@zmqmessage.org">andrew@zmqmessage.org</a>&gt;, et al.</dd></dl>
<dl compact><dt><b><a class="el" href="test.html#_test000002">Test:</a></b></dt><dd></dd></dl>
<p>
We use different types and methods for insertion and extraction of message parts. We use binary and text modes. We use all possible combinations of Routing policies (simple-to-simple, X-to-X, Simple-to-X and X-to-Simple). <hr><h2>Define Documentation</h2>
<a class="anchor" name="ba05dd2d83740c94222b093d83b308d5"></a><!-- doxytag: member="SimpleTest.cpp::ARRAY_LEN" ref="ba05dd2d83740c94222b093d83b308d5" args="(arr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARRAY_LEN          </td>
          <td>(</td>
          <td class="paramtype">arr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;sizeof(arr)/sizeof((arr)[0])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="446c6b9a1a4dbab517fbb760870458a3"></a><!-- doxytag: member="SimpleTest.cpp::main" ref="446c6b9a1a4dbab517fbb760870458a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a2764c6888486b9d77b058544384f0dc"></a><!-- doxytag: member="SimpleTest.cpp::my_free" ref="a2764c6888486b9d77b058544384f0dc" args="(void *data, void *hint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void my_free           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>hint</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a42079b2ae81527e0b10dd7ca471253a"></a><!-- doxytag: member="SimpleTest.cpp::req" ref="a42079b2ae81527e0b10dd7ca471253a" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Routing, int socktype&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void* req           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1acee2dcd7c3a6241c50a8cfb1dd1f68"></a><!-- doxytag: member="SimpleTest.cpp::res" ref="1acee2dcd7c3a6241c50a8cfb1dd1f68" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Routing, int socktype&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void* res           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a18">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="ec26d0a57824110e517f11c9be53ad48"></a><!-- doxytag: member="SimpleTest.cpp::test" ref="ec26d0a57824110e517f11c9be53ad48" args="(zmq::context_t &amp;ctx_, const char *name)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ReqRouting, int reqsocktype, typename ResRouting, int ressocktype&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void test           </td>
          <td>(</td>
          <td class="paramtype">zmq::context_t &amp;&nbsp;</td>
          <td class="paramname"> <em>ctx_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="754665f9bb084e7d8087aa27aa7552a2"></a><!-- doxytag: member="SimpleTest.cpp::test_time" ref="754665f9bb084e7d8087aa27aa7552a2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_time           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="7399e003d8ead5795ca3d5146a494db8"></a><!-- doxytag: member="SimpleTest.cpp::BIN_PART" ref="7399e003d8ead5795ca3d5146a494db8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="SimpleTest_8cpp.html#7399e003d8ead5795ca3d5146a494db8">BIN_PART</a> = 567098          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7467cad923c237f39ed035428e96b5b9"></a><!-- doxytag: member="SimpleTest.cpp::endpoint" ref="7467cad923c237f39ed035428e96b5b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#7467cad923c237f39ed035428e96b5b9">endpoint</a> = &quot;inproc://simple-test&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="719631616821376880b994914fa01e29"></a><!-- doxytag: member="SimpleTest.cpp::NUM_TEXT_PART" ref="719631616821376880b994914fa01e29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="SimpleTest_8cpp.html#719631616821376880b994914fa01e29">NUM_TEXT_PART</a> = 196670          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d344ed204d5d5d8db2586036925ed9c5"></a><!-- doxytag: member="SimpleTest.cpp::payload" ref="d344ed204d5d5d8db2586036925ed9c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#d344ed204d5d5d8db2586036925ed9c5">payload</a> = &quot;0123456789&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="43b0832b49eaccee79b843ba3cdb4fd2"></a><!-- doxytag: member="SimpleTest.cpp::payloadsz" ref="43b0832b49eaccee79b843ba3cdb4fd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t <a class="el" href="SimpleTest_8cpp.html#43b0832b49eaccee79b843ba3cdb4fd2">payloadsz</a> = 10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5b06fc00200013a9ce624c5b5730d407"></a><!-- doxytag: member="SimpleTest.cpp::req_parts" ref="5b06fc00200013a9ce624c5b5730d407" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#5b06fc00200013a9ce624c5b5730d407">req_parts</a>[] = {&quot;part1&quot;, &quot;second&quot;, &quot;<a class="el" href="SimpleTest_8cpp.html#d344ed204d5d5d8db2586036925ed9c5">payload</a>&quot;, &quot;bin part&quot;, &quot;num text part&quot;}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="cdec4615f0bcb546f9322c74c00b2a02"></a><!-- doxytag: member="SimpleTest.cpp::res_parts" ref="cdec4615f0bcb546f9322c74c00b2a02" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#cdec4615f0bcb546f9322c74c00b2a02">res_parts</a>[] = {&quot;id&quot;, &quot;status&quot;}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ed457b803a8459872ddec8a87eb46524"></a><!-- doxytag: member="SimpleTest.cpp::SECOND_PART" ref="ed457b803a8459872ddec8a87eb46524" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#ed457b803a8459872ddec8a87eb46524">SECOND_PART</a> = &quot;second part&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6117886e86ecfcb1bdc5b25b8d165395"></a><!-- doxytag: member="SimpleTest.cpp::STATUS" ref="6117886e86ecfcb1bdc5b25b8d165395" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="SimpleTest_8cpp.html#6117886e86ecfcb1bdc5b25b8d165395">STATUS</a> = &quot;OK <a class="el" href="SimpleTest_8cpp.html#6117886e86ecfcb1bdc5b25b8d165395">STATUS</a>&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>

<hr style="height: 3px;">

<div class="zm_greynote">
ZmqMessage 0.1 &mdash; open source software, <a href="mailto:support@zmqmessage.org">support@zmqmessage.org</a>
</div>

</body>
</html>
