<html>
    <head>
      <meta name="keywords" content="0MQ, ZeroMQ, C++, multipart, message, library, open source, ZmqMessage" />
      <meta name="description" content="ZmqMessage is free open source C++ library for sending and receiving ZeroMQ multipart messages"/>
      <meta name="google-site-verification" content="0EvtpfjffSrc0fDV9ubKQVfq3IV55KY5d59hXHg9M34" />
      <title>ZmqMessage: examples/zasync.cpp File Reference</title>
      <link href="doxygen.css" rel="stylesheet" type="text/css">
<style>
/* must override a few items to get the style background color */

</style>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25607292-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    </head>
    <body>

<table class="zm_headbar">
<tr>
<td>
  <span><a href="index.html">Overview</a></span>
  <span><a href="zm_tutorial.html">Tutorial</a></span>
  <span><a href="namespaceZmqMessage.html">API reference</a></span>
  <span><a href="examples.html">Examples</a></span>
  <span><a href="zm_build.html">Build</a></span>
  <span><a href="https://github.com/zmqmessage/zmqmessage/">Download</a></span>
</td>

<td align="right" class="zm_greynote">ZmqMessage 0.1 - 8 Sep 2011</td>

</tr></table>

<hr style="height: 3px;">
<!-- Generated by Doxygen 1.4.7 -->
<h1>examples/zasync.cpp File Reference</h1><code>#include &quot;pthread.h&quot;</code><br>
<code>#include &quot;stdint.h&quot;</code><br>
<code>#include &lt;vector&gt;</code><br>
<code>#include &quot;<a class="el" href="ZmqMessage_8hpp-source.html">ZmqMessage.hpp</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structasync__task.html">async_task</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; <a class="el" href="structasync__task.html">async_task</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#c4b626a1e7c2298705a6e1d8c8587d7e">TaskVec</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">zmq::context_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#dfc676557ead71d2d6a26f06c84409fe">ctx</a> (1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#9613bea495be8d44f4eb12f68c83aacd">task_step</a> (<a class="el" href="structasync__task.html">async_task</a> &amp;task)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename QueueInserter&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#be80f95dd9309819875ce8639b786566">run_tasks</a> (<a class="el" href="zasync_8cpp.html#c4b626a1e7c2298705a6e1d8c8587d7e">TaskVec</a> &amp;tasks, zmq::socket_t &amp;s_res, QueueInserter q)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#d3286db3401aa2d7a07d3bc3e3f9524c">async_task_processor</a> (void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#4b097df32a52205a4c919b840eba55fc">main</a> (int, char **)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#70bb72dad4c860bff2238e882ceadb82">req_endpoint</a> = &quot;inproc://req_ep&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#a7ed7672c8f8f848c28dabff90dd379b">res_endpoint</a> = &quot;inproc://res_ep&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#3ff515ef0c34ec454728eb7193196397">stop_endpoint</a> = &quot;inproc://stop&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#ff5265b06e3b4c15fbdf9ade25702459">to_worker_fields</a> [] = {&quot;message_type&quot;, &quot;task_identifier&quot;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#e148bfbaaf1b41e66e3d8e919617464a">from_worker_fields</a> [] = {&quot;message_type&quot;, &quot;task_identifier&quot;}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#bb2759d76ff59ab76b83a668b81826f8">message_queue_limit</a> = 5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="zasync_8cpp.html#11a35c131ff5a1f54172a8e083cb205c">max_task_steps</a> = 10</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Copyright (c) 2010-2011 Phorm, Inc.  GNU LGPL v 3.0, see <a href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html">http://www.gnu.org/licenses/lgpl-3.0-standalone.html</a> <dl compact><dt><b>Author:</b></dt><dd>Andrey Skryabin &lt;<a href="mailto:andrew@zmqmessage.org">andrew@zmqmessage.org</a>&gt;, et al.</dd></dl>
Demonstrating <a class="el" href="namespaceZmqMessage.html">ZmqMessage</a> queueing functionality for delayed sending of messages to implement asynchronous worker thread. (Note that currently queueing has proven working only for PUSH-PULL sockets.) <hr><h2>Typedef Documentation</h2>
<a class="anchor" name="c4b626a1e7c2298705a6e1d8c8587d7e"></a><!-- doxytag: member="zasync.cpp::TaskVec" ref="c4b626a1e7c2298705a6e1d8c8587d7e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="structasync__task.html">async_task</a>&gt; <a class="el" href="zasync_8cpp.html#c4b626a1e7c2298705a6e1d8c8587d7e">TaskVec</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d3286db3401aa2d7a07d3bc3e3f9524c"></a><!-- doxytag: member="zasync.cpp::async_task_processor" ref="d3286db3401aa2d7a07d3bc3e3f9524c" args="(void *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* async_task_processor           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a17">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="dfc676557ead71d2d6a26f06c84409fe"></a><!-- doxytag: member="zasync.cpp::ctx" ref="dfc676557ead71d2d6a26f06c84409fe" args="(1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zmq::context_t ctx           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a0">zasync.cpp</a>, <a class="el" href="zbisort_8cpp-example.html#a24">zbisort.cpp</a>, <a class="el" href="zqueue_8cpp-example.html#a41">zqueue.cpp</a>, <a class="el" href="zserialize_8cpp-example.html#a52">zserialize.cpp</a>, and <a class="el" href="zsort_8cpp-example.html#a67">zsort.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="4b097df32a52205a4c919b840eba55fc"></a><!-- doxytag: member="zasync.cpp::main" ref="4b097df32a52205a4c919b840eba55fc" args="(int, char **)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a22">zasync.cpp</a>, <a class="el" href="zbisort_8cpp-example.html#a39">zbisort.cpp</a>, <a class="el" href="zqueue_8cpp-example.html#a51">zqueue.cpp</a>, <a class="el" href="zserialize_8cpp-example.html#a65">zserialize.cpp</a>, and <a class="el" href="zsort_8cpp-example.html#a71">zsort.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="be80f95dd9309819875ce8639b786566"></a><!-- doxytag: member="zasync.cpp::run_tasks" ref="be80f95dd9309819875ce8639b786566" args="(TaskVec &amp;tasks, zmq::socket_t &amp;s_res, QueueInserter q)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename QueueInserter&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void run_tasks           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="zasync_8cpp.html#c4b626a1e7c2298705a6e1d8c8587d7e">TaskVec</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">zmq::socket_t &amp;&nbsp;</td>
          <td class="paramname"> <em>s_res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QueueInserter&nbsp;</td>
          <td class="paramname"> <em>q</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a11">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="9613bea495be8d44f4eb12f68c83aacd"></a><!-- doxytag: member="zasync.cpp::task_step" ref="9613bea495be8d44f4eb12f68c83aacd" args="(async_task &amp;task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_step           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structasync__task.html">async_task</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>task</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a9">zasync.cpp</a>.</dl>
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="e148bfbaaf1b41e66e3d8e919617464a"></a><!-- doxytag: member="zasync.cpp::from_worker_fields" ref="e148bfbaaf1b41e66e3d8e919617464a" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="zqueue_8cpp.html#e148bfbaaf1b41e66e3d8e919617464a">from_worker_fields</a>[] = {&quot;message_type&quot;, &quot;task_identifier&quot;}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a5">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="11a35c131ff5a1f54172a8e083cb205c"></a><!-- doxytag: member="zasync.cpp::max_task_steps" ref="11a35c131ff5a1f54172a8e083cb205c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="zasync_8cpp.html#11a35c131ff5a1f54172a8e083cb205c">max_task_steps</a> = 10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a7">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="bb2759d76ff59ab76b83a668b81826f8"></a><!-- doxytag: member="zasync.cpp::message_queue_limit" ref="bb2759d76ff59ab76b83a668b81826f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="zasync_8cpp.html#bb2759d76ff59ab76b83a668b81826f8">message_queue_limit</a> = 5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a6">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="70bb72dad4c860bff2238e882ceadb82"></a><!-- doxytag: member="zasync.cpp::req_endpoint" ref="70bb72dad4c860bff2238e882ceadb82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="zasync_8cpp.html#70bb72dad4c860bff2238e882ceadb82">req_endpoint</a> = &quot;inproc://req_ep&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a1">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="a7ed7672c8f8f848c28dabff90dd379b"></a><!-- doxytag: member="zasync.cpp::res_endpoint" ref="a7ed7672c8f8f848c28dabff90dd379b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="zasync_8cpp.html#a7ed7672c8f8f848c28dabff90dd379b">res_endpoint</a> = &quot;inproc://res_ep&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a2">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="3ff515ef0c34ec454728eb7193196397"></a><!-- doxytag: member="zasync.cpp::stop_endpoint" ref="3ff515ef0c34ec454728eb7193196397" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="zqueue_8cpp.html#3ff515ef0c34ec454728eb7193196397">stop_endpoint</a> = &quot;inproc://stop&quot;          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a3">zasync.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="ff5265b06e3b4c15fbdf9ade25702459"></a><!-- doxytag: member="zasync.cpp::to_worker_fields" ref="ff5265b06e3b4c15fbdf9ade25702459" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="zserialize_8cpp.html#ff5265b06e3b4c15fbdf9ade25702459">to_worker_fields</a>[] = {&quot;message_type&quot;, &quot;task_identifier&quot;}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="zasync_8cpp-example.html#a4">zasync.cpp</a>.</dl>
</div>
</div><p>

<hr style="height: 3px;">

<div class="zm_greynote">
ZmqMessage 0.1 &mdash; open source software, <a href="mailto:support@zmqmessage.org">support@zmqmessage.org</a>
</div>

</body>
</html>
